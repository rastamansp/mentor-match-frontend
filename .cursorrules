# üöÄ Cursor Rules - Gwan Events Frontend

## üìã Vis√£o Geral do Projeto

Este √© um projeto React + TypeScript + Vite que implementa o frontend da plataforma de eventos e venda de ingressos. O projeto segue os princ√≠pios de Clean Architecture, SOLID e melhores pr√°ticas de desenvolvimento frontend.

## üö´ **REGRAS CR√çTICAS - NUNCA VIOLAR**

### ‚ùå **NUNCA desabilitar funcionalidades essenciais:**
- ‚ùå **NUNCA** usar `any` type
- ‚ùå **NUNCA** usar `console.log` (usar logger estruturado ou remover)
- ‚ùå **NUNCA** remover valida√ß√µes de props
- ‚ùå **NUNCA** desabilitar tratamento de erros
- ‚ùå **NUNCA** remover interfaces ou tipos TypeScript
- ‚ùå **NUNCA** fazer opera√ß√µes s√≠ncronas bloqueantes
- ‚ùå **NUNCA** misturar l√≥gica de neg√≥cio com componentes de UI
- ‚ùå **NUNCA** usar `alert()` - sempre usar react-hot-toast

### ‚úÖ **SEMPRE corrigir problemas de configura√ß√£o:**
- ‚úÖ **SEMPRE** verificar vari√°veis de ambiente
- ‚úÖ **SEMPRE** configurar APIs corretamente
- ‚úÖ **SEMPRE** implementar fallbacks e retry logic
- ‚úÖ **SEMPRE** usar logging estruturado para debug
- ‚úÖ **SEMPRE** seguir princ√≠pios de resili√™ncia
- ‚úÖ **SEMPRE** usar react-hot-toast para notifica√ß√µes

## üèóÔ∏è Arquitetura e Padr√µes

### Clean Architecture (Adaptada para Frontend)
- **Entities**: Tipos e interfaces de dom√≠nio (src/domain/entities)
- **Use Cases**: Casos de uso da aplica√ß√£o (src/application/use-cases)
- **Interface Adapters**: Services, API clients, Context providers (src/infrastructure)
- **Frameworks & Drivers**: React, Vite, Tailwind, Axios (src/presentation)

### SOLID Principles (Adaptados para Frontend)
- **S**: Single Responsibility Principle (componentes com uma responsabilidade)
- **O**: Open/Closed Principle (extens√≠vel via props, fechado para modifica√ß√£o)
- **L**: Liskov Substitution Principle (componentes substitu√≠veis)
- **I**: Interface Segregation Principle (interfaces espec√≠ficas)
- **D**: Dependency Inversion Principle (depender de abstra√ß√µes, n√£o implementa√ß√µes)

### Design Patterns
- **Repository Pattern**: Para acesso a dados via services
- **Factory Pattern**: Para cria√ß√£o de objetos complexos
- **Observer Pattern**: Para gerenciamento de estado (Context API)
- **Command Pattern**: Para a√ß√µes do usu√°rio
- **Provider Pattern**: Para inje√ß√£o de depend√™ncias
- **Custom Hooks Pattern**: Para l√≥gica de neg√≥cio reutiliz√°vel

## üìÅ Estrutura de Pastas (Clean Architecture)

```
src/
‚îú‚îÄ‚îÄ domain/                      # Camada de Dom√≠nio
‚îÇ   ‚îú‚îÄ‚îÄ entities/               # Entidades de neg√≥cio
‚îÇ   ‚îú‚îÄ‚îÄ repositories/           # Interfaces dos reposit√≥rios
‚îÇ   ‚îî‚îÄ‚îÄ errors/                 # Erros de dom√≠nio
‚îú‚îÄ‚îÄ application/                # Camada de Aplica√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ use-cases/             # Casos de uso
‚îÇ   ‚îú‚îÄ‚îÄ dto/                   # Data Transfer Objects
‚îÇ   ‚îî‚îÄ‚îÄ validators/            # Validadores Zod
‚îú‚îÄ‚îÄ infrastructure/             # Camada de Infraestrutura
‚îÇ   ‚îú‚îÄ‚îÄ repositories/          # Implementa√ß√µes dos reposit√≥rios
‚îÇ   ‚îú‚îÄ‚îÄ logging/               # Sistema de logging
‚îÇ   ‚îî‚îÄ‚îÄ http/                  # Cliente HTTP
‚îú‚îÄ‚îÄ presentation/              # Camada de Apresenta√ß√£o
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                # Custom hooks
‚îÇ   ‚îú‚îÄ‚îÄ components/           # Componentes React
‚îÇ   ‚îú‚îÄ‚îÄ pages/               # P√°ginas da aplica√ß√£o
‚îÇ   ‚îî‚îÄ‚îÄ contexts/             # Contextos React
‚îú‚îÄ‚îÄ shared/                   # C√≥digo compartilhado
‚îÇ   ‚îú‚îÄ‚îÄ di/                  # Container de inje√ß√£o de depend√™ncias
‚îÇ   ‚îú‚îÄ‚îÄ constants/           # Constantes
‚îÇ   ‚îî‚îÄ‚îÄ utils/               # Utilit√°rios
‚îú‚îÄ‚îÄ components/              # Componentes compartilhados globais
‚îú‚îÄ‚îÄ contexts/                # Contextos globais
‚îú‚îÄ‚îÄ App.tsx                  # Componente principal com Toaster
‚îú‚îÄ‚îÄ main.tsx                 # Arquivo de entrada
‚îî‚îÄ‚îÄ index.css                # Estilos globais
```

## üîß Padr√µes de C√≥digo

### Nomenclatura
- **Componentes**: PascalCase (ex: `EventCard`, `UserProfile`)
- **Interfaces**: PascalCase com prefixo I (ex: `IEvent`, `IUser`) OU sem prefixo (ex: `EventCardProps`)
- **Fun√ß√µes**: camelCase (ex: `handleSubmit`, `validateForm`)
- **Vari√°veis**: camelCase (ex: `eventList`, `userData`)
- **Constantes**: UPPER_SNAKE_CASE (ex: `API_BASE_URL`, `MAX_EVENTS`)
- **Arquivos**: PascalCase para componentes, camelCase para outros (ex: `EventCard.tsx`, `apiService.ts`)
- **P√°ginas**: Sufixo `.page.tsx` (ex: `Events.page.tsx`, `Login.page.tsx`)

### Estrutura de Componentes
```typescript
import React from 'react'
import { toast } from 'react-hot-toast'
// Imports espec√≠ficos depois dos gen√©ricos

interface IEventCardProps {
  event: IEvent
  onSelect?: (event: IEvent) => void
  className?: string
}

export const EventCard: React.FC<IEventCardProps> = ({ 
  event, 
  onSelect, 
  className 
}) => {
  // Hooks primeiro
  const [isLoading, setIsLoading] = useState(false)
  
  // Handlers com useCallback
  const handleClick = useCallback(() => {
    onSelect?.(event)
  }, [event, onSelect])
  
  // useEffects
  useEffect(() => {
    // efeitos
  }, [])
  
  // Render
  return (
    <div className={className} onClick={handleClick}>
      {/* JSX */}
    </div>
  )
}
```

### Sistema de Notifica√ß√µes com react-hot-toast

**SEMPRE use toast ao inv√©s de alert():**
```typescript
import { toast } from 'react-hot-toast'

// Sucesso
toast.success('Opera√ß√£o realizada com sucesso!')

// Erro
toast.error('Erro ao realizar opera√ß√£o')

// Aviso
toast('Mensagem de aviso', { icon: '‚ö†Ô∏è' })

// Customizado
toast((t) => (
  <span>
    Mensagem personalizada
    <button onClick={() => toast.dismiss(t.id)}>Fechar</button>
  </span>
))
```

## üéØ Padr√µes de Custom Hooks

### Estrutura de Custom Hook
```typescript
import { useState, useCallback } from 'react'
import { container } from '../../shared/di/container'
import { ILogger } from '../../infrastructure/logging/ILogger'

interface UseCustomHookResult {
  data: any
  loading: boolean
  error: Error | null
  refetch: () => Promise<void>
}

export const useCustomHook = (): UseCustomHookResult => {
  const [data, setData] = useState<any>(null)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<Error | null>(null)
  const logger: ILogger = container.logger
  
  const fetch = useCallback(async () => {
    try {
      setLoading(true)
      setError(null)
      
      const result = await container.repository.method()
      setData(result)
      
      logger.info('Operation successful', { data: result })
    } catch (err) {
      setError(err as Error)
      logger.error('Operation failed', err as Error)
      throw err
    } finally {
      setLoading(false)
    }
  }, [logger])
  
  useEffect(() => {
    fetch()
  }, [fetch])
  
  return {
    data,
    loading,
    error,
    refetch: fetch
  }
}
```

## üîå Padr√µes de Repository

### Interface de Repository
```typescript
import { Entity } from '../entities/Entity.entity'

export interface IRepository {
  findAll(filters?: any): Promise<Entity[]>
  findById(id: string): Promise<Entity | null>
  create(data: CreateData): Promise<Entity>
  update(id: string, data: UpdateData): Promise<Entity>
  delete(id: string): Promise<void>
}

export interface CreateData {
  // campos
}

export interface UpdateData extends Partial<CreateData> {}
```

### Implementa√ß√£o de Repository
```typescript
import { AxiosInstance } from 'axios'
import { IRepository } from './IRepository'
import { Entity } from '../entities/Entity.entity'
import { NetworkError, NotFoundError } from '../../domain/errors/DomainError'
import axios from 'axios'

export class EntityRepository implements IRepository {
  constructor(private readonly httpClient: AxiosInstance) {}
  
  async findAll(filters?: any): Promise<Entity[]> {
    try {
      const response = await this.httpClient.get('/entities', { params: filters })
      return response.data
    } catch (error) {
      if (axios.isAxiosError(error)) {
        throw new NetworkError(`Failed to fetch entities: ${error.message}`, error)
      }
      throw error
    }
  }
  
  // Outros m√©todos seguindo mesmo padr√£o...
}
```

## üé® Padr√µes de P√°ginas

### Estrutura de P√°gina
```typescript
import React, { useState, useEffect } from 'react'
import { useNavigate, useParams } from 'react-router-dom'
import { toast } from 'react-hot-toast'
import { useCustomHook } from '../hooks/useCustomHook'
// Outros imports

export const EntityPage: React.FC = () => {
  const { id } = useParams<{ id: string }>()
  const navigate = useNavigate()
  const { data, loading, error } = useCustomHook()
  
  // Estados
  const [formData, setFormData] = useState<FormDataType>({
    // campos
  })
  
  // Handlers
  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    try {
      // opera√ß√£o
      toast.success('Opera√ß√£o realizada com sucesso!')
      navigate('/next-page')
    } catch (err) {
      toast.error('Erro ao realizar opera√ß√£o')
    }
  }
  
  // Loading state
  if (loading) {
    return (
      <div className="flex justify-center items-center min-h-screen">
        <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"></div>
      </div>
    )
  }
  
  // Error state
  if (error) {
    return (
      <div className="text-center py-12">
        <p className="text-red-600">{error.message}</p>
      </div>
    )
  }
  
  // Render
  return (
    <div className="container mx-auto px-4 py-8">
      {/* Conte√∫do */}
    </div>
  )
}
```

## üìù Padr√µes de Valida√ß√£o

### Valida√ß√£o com Zod
```typescript
import { z } from 'zod'

export const EntitySchema = z.object({
  title: z.string().min(3, 'T√≠tulo deve ter no m√≠nimo 3 caracteres').max(200),
  description: z.string().min(10, 'Descri√ß√£o deve ter no m√≠nimo 10 caracteres'),
  price: z.number().positive('Pre√ßo deve ser positivo'),
})

export type Entity = z.infer<typeof EntitySchema>

// Uso em formul√°rios
const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {
  const { name, value } = e.target
  setFormData(prev => ({
    ...prev,
    [name]: name === 'price' ? parseFloat(value) || 0 : value
  }))
  
  // Limpar erro ao mudar
  if (errors[name]) {
    setErrors(prev => {
      const newErrors = { ...prev }
      delete newErrors[name]
      return newErrors
    })
  }
}

const validateForm = (): boolean => {
  const newErrors: Record<string, string> = {}
  
  if (!formData.title.trim()) {
    newErrors.title = 'T√≠tulo √© obrigat√≥rio'
  }
  
  setErrors(newErrors)
  return Object.keys(newErrors).length === 0
}
```

### M√°scara de CPF
```typescript
const applyCPFMask = (value: string): string => {
  const cleaned = value.replace(/\D/g, '')
  if (cleaned.length <= 11) {
    return cleaned
      .replace(/(\d{3})(\d)/, '$1.$2')
      .replace(/(\d{3})(\d)/, '$1.$2')
      .replace(/(\d{3})(\d{1,2})$/, '$1-$2')
  }
  return value
}
```

## üé® Padr√µes de UI com react-hot-toast

### Configura√ß√£o Global
```typescript
// No App.tsx
import { Toaster } from 'react-hot-toast'

<Toaster
  position="top-right"
  toastOptions={{
    duration: 4000,
    style: {
      background: '#363636',
      color: '#fff',
    },
    success: {
      duration: 3000,
      iconTheme: {
        primary: '#10b981',
        secondary: '#fff',
      },
    },
    error: {
      duration: 4000,
      iconTheme: {
        primary: '#ef4444',
        secondary: '#fff',
      },
    },
  }}
/>
```

## üîÑ Clean Architecture - Camadas

### Domain (Dom√≠nio)
- **Responsabilidade**: Entidades e regras de neg√≥cio
- **N√£o depende de**: Camadas externas
- **Exemplo**: `Event.entity.ts`, `IEventRepository.ts`

### Application (Aplica√ß√£o)
- **Responsabilidade**: Casos de uso e DTOs
- **Depende de**: Domain
- **Exemplo**: `CreateEvent.usecase.ts`, `CreateEventDto.ts`

### Infrastructure (Infraestrutura)
- **Responsabilidade**: Implementa√ß√µes concretas
- **Depende de**: Domain
- **Exemplo**: `EventRepository.ts`, `AuthRepository.ts`

### Presentation (Apresenta√ß√£o)
- **Responsabilidade**: UI e intera√ß√£o com usu√°rio
- **Depende de**: Application e Infrastructure
- **Exemplo**: `Events.page.tsx`, `useEvents.ts`

## üö´ O que NUNCA fazer

- ‚ùå **NUNCA** usar `any` type - sempre tipar corretamente
- ‚ùå **NUNCA** usar `console.log` - usar logger estruturado
- ‚ùå **NUNCA** usar `alert()` - usar react-hot-toast
- ‚ùå **NUNCA** deixar props sem valida√ß√£o
- ‚ùå **NUNCA** misturar l√≥gica de neg√≥cio com UI
- ‚ùå **NUNCA** usar `var` (sempre `const` ou `let`)
- ‚ùå **NUNCA** fazer opera√ß√µes s√≠ncronas bloqueantes
- ‚ùå **NUNCA** esquecer de tratar erros
- ‚ùå **NUNCA** usar vari√°veis globais
- ‚ùå **NUNCA** criar componentes muito grandes (>400 linhas)
- ‚ùå **NUNCA** usar `useEffect` sem depend√™ncias corretas
- ‚ùå **NUNCA** remover valida√ß√µes existentes
- ‚ùå **NUNCA** desabilitar tratamento de erros

## ‚úÖ O que SEMPRE fazer

- ‚úÖ Usar TypeScript strict mode
- ‚úÖ Definir interfaces para todas as props
- ‚úÖ Usar hooks apropriadamente (useState, useEffect, useCallback, useMemo)
- ‚úÖ Validar entrada de dados com Zod
- ‚úÖ Tratar erros adequadamente com try/catch
- ‚úÖ Usar react-hot-toast para notifica√ß√µes
- ‚úÖ Usar logs estruturados (container.logger)
- ‚úÖ Seguir princ√≠pios SOLID
- ‚úÖ Implementar Clean Architecture
- ‚úÖ Usar React.memo quando apropriado
- ‚úÖ Usar useCallback e useMemo quando necess√°rio
- ‚úÖ Separar l√≥gica de neg√≥cio de UI
- ‚úÖ Criar custom hooks para l√≥gica reutiliz√°vel
- ‚úÖ Organizar imports: React ‚Üí Third-party ‚Üí Internal
- ‚úÖ Usar sufixo `.page.tsx` para p√°ginas
- ‚úÖ Usar PascalCase para componentes e interfaces

## üîÑ Fluxo de Desenvolvimento

1. **Definir Interface** - Como o componente se comunica
2. **Criar Componente** - Implementa√ß√£o seguindo os padr√µes
3. **Adicionar Hooks** - L√≥gica de estado e efeitos
4. **Validar Props** - Verificar entrada de dados com Zod
5. **Tratar Erros** - Implementar tratamento adequado
6. **Notifica√ß√µes** - Usar react-hot-toast ao inv√©s de alert
7. **Testar** - Componente funciona corretamente
8. **Otimizar** - Performance quando necess√°rio

## üìö Bibliotecas e Ferramentas

### Principais
- **React 18**: Biblioteca UI
- **TypeScript**: Tipagem est√°tica
- **Vite**: Build tool
- **React Router**: Roteamento
- **Tailwind CSS**: Estiliza√ß√£o
- **Axios**: Cliente HTTP
- **react-hot-toast**: Sistema de notifica√ß√µes
- **Zod**: Valida√ß√£o de esquemas
- **date-fns**: Manipula√ß√£o de datas
- **Lucide React**: √çcones
- **React Hook Form**: Formul√°rios

### Arquitetura
- Clean Architecture adaptada para frontend
- SOLID Principles
- Repository Pattern
- Dependency Injection
- Custom Hooks Pattern

---

**Lembre-se**: Este arquivo define os padr√µes do projeto frontend. Sempre consulte antes de implementar novas funcionalidades para garantir consist√™ncia e qualidade do c√≥digo. **NUNCA desabilite funcionalidades essenciais - sempre corrija os problemas de configura√ß√£o!**
